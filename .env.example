# ============================================================================
# CQRS Gaming Platform - Environment Configuration
# ============================================================================
# Copy this file to .env and fill in the values
# IMPORTANT: Never commit .env to version control (it's in .gitignore)
# ============================================================================

# ----------------------------------------------------------------------------
# Kafka Configuration (KRaft Mode)
# ----------------------------------------------------------------------------
KAFKA_NODE_ID=1
KAFKA_PROCESS_ROLES=broker,controller
KAFKA_CONTROLLER_QUORUM_VOTERS=1@kafka:9094
KAFKA_CONTROLLER_LISTENER_NAMES=CONTROLLER
KAFKA_LISTENERS=PLAINTEXT://kafka:9093,PLAINTEXT_HOST://0.0.0.0:9092,CONTROLLER://kafka:9094
KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9093,PLAINTEXT_HOST://localhost:9092
KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=PLAINTEXT:PLAINTEXT,PLAINTEXT_HOST:PLAINTEXT,CONTROLLER:PLAINTEXT
KAFKA_INTER_BROKER_LISTENER_NAME=PLAINTEXT
KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
KAFKA_TRANSACTION_STATE_LOG_REPLICATION_FACTOR=1
KAFKA_TRANSACTION_STATE_LOG_MIN_ISR=1
KAFKA_AUTO_CREATE_TOPICS_ENABLE=true

# Generate a unique cluster ID with:
# docker run --rm apache/kafka:4.0.1 /opt/kafka/bin/kafka-storage.sh random-uuid
CLUSTER_ID=

# ----------------------------------------------------------------------------
# Kafka Connection (for microservices)
# ----------------------------------------------------------------------------
KAFKA_BOOTSTRAP_SERVERS=kafka:9093
KAFKA_TOPIC=game-events
KAFKA_GROUP_ID=event-processor

# User Service Kafka Topic
KAFKA_USER_TOPIC=user-events
KAFKA_USER_GROUP_ID=user-event-processor

# ----------------------------------------------------------------------------
# Redis Configuration
# ----------------------------------------------------------------------------
REDIS_HOST=redis
REDIS_PORT=6379

# ----------------------------------------------------------------------------
# PostgreSQL Configuration (User Service)
# ----------------------------------------------------------------------------
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=gaming_users
POSTGRES_USER=postgres
POSTGRES_PASSWORD=changeme123
POSTGRES_PORT_EXTERNAL=5432

# ----------------------------------------------------------------------------
# Event Processor Configuration
# ----------------------------------------------------------------------------
# How many events before creating a snapshot (performance optimization)
SNAPSHOT_INTERVAL=50

# ----------------------------------------------------------------------------
# Service Ports
# ----------------------------------------------------------------------------
COMMAND_SERVICE_PORT=5000
QUERY_SERVICE_PORT=5001
USER_SERVICE_PORT=5002
API_GATEWAY_PORT=8000
FRONTEND_PORT=3000
KAFKA_EXTERNAL_PORT=9092
KAFKA_INTERNAL_PORT=9093
REDIS_PORT_EXTERNAL=6379

# ----------------------------------------------------------------------------
# Auth0 Configuration
# ----------------------------------------------------------------------------
# SECURITY: These are secrets! Do NOT commit the .env file to git
#
# Get these values from your Auth0 Dashboard:
# 1. Go to https://manage.auth0.com/
# 2. Applications > Your Application
# 3. Settings tab
#
# Required for backend JWT verification (API Gateway):
AUTH0_DOMAIN=                    # e.g., dev-abc123.us.auth0.com
AUTH0_AUDIENCE=                  # e.g., https://api.gaming-platform.com
#
# Required for frontend authentication:
AUTH0_CLIENT_ID=                 # e.g., ABCDEfghIJKLMNoPqrsTuvwxYZ1234
#
# Required for Auth0 Management API (User Service - for user signup/deletion):
# Create a Machine-to-Machine Application authorized for Management API
AUTH0_MGMT_CLIENT_ID=            # Management API Client ID
AUTH0_MGMT_CLIENT_SECRET=        # Management API Client Secret
AUTH0_CONNECTION=Username-Password-Authentication  # Auth0 database connection name
